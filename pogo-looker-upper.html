<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <!--
       So... when playing Pokemon GO, there's this situation which
       comes up every now and then - you're about to fight some
       pokemon, and you see it's a WATER type. The app suggests a
       team for you to enter the fray with, but often it's not a very
       strong team because it doesn't take the defender's weaknesses
       into consideration.

       What I normally do then is to google the defender's type, get
       to a web page with a zillion ads, scroll down lots and lots where I may or may not find a
       table where I look up the type. If it was type WATER, I find
       out that this pokemon is weak to Fire, Ground, and Rock
       attacks.

       Next, I re-open Pokemon GO, and search among my Pokemon for
       any which has moves which belong to one of he three
       attacks. PoGo has a weird search syntax, and I need to type
       the following:

       @1fire,@1ground,@1rock&@2fire,@2ground,@2rock

       This is, needless to say, a major PITA. 

       So I decided to write a little webpage which does the lookup
       for me. Along the way I even learned some (very basic)
       javascript. Yay for me!

       fimblo
  -->

  <head>
    <title>Pokemon GO: Strength looker-upper</title>

    <script>
     /*
        The pokemon types and their weaknesses
      */
     const matrix  = {
       "normal"   : ["fighting"],
       "fighting" : ["flying","psychic","fairy"],
       "flying"   : ["rock","electric","ice"],
       "poison"   : ["ground","psychic"],
       "ground"   : ["water","grass","ice"],
       "rock"     : ["fighting","ground","steel","water","grass"],
       "bug"      : ["flying","rock","fire"],
       "ghost"    : ["ghost","dark"],
       "steel"    : ["fighting","ground","fire"],
       "fire"     : ["ground","rock","water"],
       "water"    : ["grass","electric"],
       "grass"    : ["flying","poison","bug","fire","ice"],
       "electric" : ["ground"],
       "psychic"  : ["bug","ghost","dark"],
       "ice"      : ["fighting","rock","steel","fire"],
       "dragon"   : ["ice","dragon","fairy"],
       "fairy"    : ["poison","steel"],
       "dark"     : ["fighting","bug","fairy"],

     };


     /*
        Helper function.
        Capitalises the first letter of a string.
      */
     function _uc (string) {
       return string.charAt(0).toUpperCase() + string.slice(1);
     }

     /*
        Given a pokemon type, returns a string you can paste into
        Pokemon GO's Pokemon search field.
      */
     function createSearchString (poketype) {
       const pokearray = matrix[poketype];
       var output = "";
       var arr = [];

       for (t in pokearray) {
         arr.push("@" + 1 + pokearray[t]);
       }
       output = arr.join(',');

       arr = [];
       for (t in pokearray) {
         arr.push("@" + 2 + pokearray[t]);
       }
       output += "&" + arr.join(',');

       return output;
     }
     
     /*
        Updates HTML entities with data
      */
     function updateFields (poketype) {
       document.getElementById("selected").innerHTML="Your opponent Pokemon is type: <b>" + poketype.toUpperCase() + "</b>.";
       document.getElementById("strength").innerHTML= _uc(poketype) + " types are weak against  <b>" + matrix[poketype] + "</b>";
       document.getElementById("search").innerHTML=createSearchString(poketype);
     }


    </script>
</head>
<body>


<div id="selected">Output goes here</div>
<div id="strength">Output goes here</div>
<br>
Your search string is:
<div id="search">Output goes here</div>

<p>
<button type="button" onclick=updateFields("bug")      >Bug</button>
<button type="button" onclick=updateFields("dark")     >Dark</button>
<button type="button" onclick=updateFields("dragon")   >Dragon</button>
<button type="button" onclick=updateFields("electric") >Electric</button>
<button type="button" onclick=updateFields("fairy")    >Fairy</button>
<button type="button" onclick=updateFields("fighting") >Fighting</button>
</p>
<p>
<button type="button" onclick=updateFields("fire")     >Fire</button>
<button type="button" onclick=updateFields("flying")   >Flying</button>
<button type="button" onclick=updateFields("ghost")    >Ghost</button>
<button type="button" onclick=updateFields("grass")    >Grass</button>
<button type="button" onclick=updateFields("ground")   >Ground</button>
<button type="button" onclick=updateFields("ice")      >Ice</button>
</p>
<p>
<button type="button" onclick=updateFields("normal")   >Normal</button>
<button type="button" onclick=updateFields("poison")   >Poison</button>
<button type="button" onclick=updateFields("psychic")  >Psychic</button>
<button type="button" onclick=updateFields("rock")     >Rock</button>
<button type="button" onclick=updateFields("steel")    >Steel</button>
<button type="button" onclick=updateFields("water")    >Water</button>
</p>

</body>
</html>

